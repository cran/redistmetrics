<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Measures of Compactness</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Measures of Compactness</h1>



<p>There are dozens of measures of compactness. This vignette introduces
some of the most common and most important measures of compactness. See
the vignette “Using <code>redistmetrics</code>” for the bare-bones of
the package.</p>
<p>We first load the <code>redistmetrics</code> package and data from
New Hampshire. For any function, the <code>shp</code> argument can be
swapped out for your data and the <code>plans</code> argument can be
swapped out for your redistricting plans (be it a single plan, a matrix
of plans, or a <code>redist_plans</code> object).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(redistmetrics)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">data</span>(nh)</span></code></pre></div>
<p>The New Hampshire proposed Republican plan looks like:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<div id="area-based-compactness" class="section level1">
<h1>Area-Based Compactness</h1>
<div id="polsby-popper-compactness" class="section level2">
<h2>Polsby-Popper Compactness</h2>
<p>Polsby-Popper is proportional to the ratio of a districts area (<span class="math inline">\(A_D\)</span>) and its perimeter (<span class="math inline">\(P_D\)</span>). Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Polsby-Popper} =
4\pi\frac{A_D}{P_D^2}\]</span> Scores range from 0 to 1, where 0 is the
least compact and 1 is the most compact.</p>
<p>Polsby-Popper compactness can be computed with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">comp_polsby</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.2324375 0.1582763</span></span></code></pre></div>
<div id="schwartzberg-compactness" class="section level3">
<h3>Schwartzberg Compactness</h3>
<p>Schwartzberg Compactness is similar to Polsby-Popper compactness and
is also based on the comparison of a district’s perimeter (<span class="math inline">\(P_D\)</span>) to its area (<span class="math inline">\(A_D\)</span>). Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Schwartzberg} =
\frac{1}{\frac{P_D}{2\pi\sqrt{A_D/\pi}}}\]</span></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the
most compact.</p>
<p>Schwartzberg compactness can be computed with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">comp_schwartz</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.4821177 0.3978395</span></span></code></pre></div>
</div>
<div id="reock-compactness" class="section level3">
<h3>Reock Compactness</h3>
<p>Reock compactness compares the area of the district (<span class="math inline">\(A_D\)</span>) to the area of the minimum bounding
circle (<span class="math inline">\(A_{MBC}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Reock} = \frac{A_D}{A_{MBC}}
\]</span> Scores range from 0 to 1, where 0 is the least compact and 1
is the most compact.</p>
<p>Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">comp_reock</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.4444653 0.2502152</span></span></code></pre></div>
</div>
<div id="box-reock-compactness" class="section level3">
<h3>Box Reock Compactness</h3>
<p>Box Reock compactness compares the area of the district (<span class="math inline">\(A_D\)</span>) to the area of the minimum bounding
rectangle (<span class="math inline">\(A_{MBR}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Box Reock} =
\frac{A_D}{A_{MBR}} \]</span></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the
most compact.</p>
<p>Box Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">comp_box_reock</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.5769441 0.4196260</span></span></code></pre></div>
</div>
<div id="bounding-box-reock-compactness" class="section level3">
<h3>Bounding Box Reock Compactness</h3>
<p>Bounding Box Reock compactness compares the area of the district
(<span class="math inline">\(A_D\)</span>) to the area of the bounding
box (<span class="math inline">\(A_{BB}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Bounding Box Reock} =
\frac{A_D}{A_{BB}} \]</span></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the
most compact.</p>
<p>Bounding Box Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">comp_bbox_reock</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.4380166 0.4194030</span></span></code></pre></div>
</div>
<div id="convex-hull-compactness" class="section level3">
<h3>Convex Hull Compactness</h3>
<p>Convex Hull compactness compares the area of the district (<span class="math inline">\(A_D\)</span>) to the area of the convex hull
(<span class="math inline">\(A_{CV}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Convex Hull} =
\frac{A_D}{A_{CV}} \]</span> Scores range from 0 to 1, where 0 is the
least compact and 1 is the most compact.</p>
<p>Convex Hull compactness can be computed with:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">comp_ch</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.6763964 0.6626738</span></span></code></pre></div>
</div>
<div id="skew-compactness" class="section level3">
<h3>Skew Compactness</h3>
<p>Skew compactness compares the area of the maximum inscribed circle
(<span class="math inline">\(A_{MIC}\)</span>) to the area of the
minimum bounding circle (<span class="math inline">\(A_{MBC}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Skew} = \frac{A_{MIC}}{A_{MBC}}
\]</span> Scores range from 0 to 1, where 0 is the least compact and 1
is the most compact.</p>
<p>Skew compactness can be computed with:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">comp_skew</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.3640221 0.2481286</span></span></code></pre></div>
</div>
<div id="x-symmetry-compactness" class="section level3">
<h3>X-Symmetry Compactness</h3>
<p>X-Symmetry compactness compares the area of the intersection of a
district reflected over its x-axis (<span class="math inline">\(A(I(D,
D^{X}))\)</span>) to the area of the district (<span class="math inline">\(A_D\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{X-Symmetry} = \frac{A(I(D,
D^{X}))}{A_D} \]</span> Scores range from 0 to 1, where 0 is the least
compact and 1 is the most compact.</p>
<p>X-Symmetry compactness can be computed with:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">comp_x_sym</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.6995961 0.3436371</span></span></code></pre></div>
</div>
<div id="y-symmetry-compactness" class="section level3">
<h3>Y-Symmetry Compactness</h3>
<p>Y-Symmetry compactness compares the area of the intersection of a
district reflected over its y-axis (<span class="math inline">\(A(I(D,
D^{Y}))\)</span>) to the area of the district (<span class="math inline">\(A_D\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Y-Symmetry} = \frac{A(I(D,
D^{Y}))}{A_D} \]</span> Scores range from 0 to 1, where 0 is the least
compact and 1 is the most compact.</p>
<p>Y-Symmetry compactness can be computed with:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">comp_y_sym</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.7307813 0.4346136</span></span></code></pre></div>
</div>
</div>
</div>
<div id="distance-based-compactness" class="section level1">
<h1>Distance-Based Compactness</h1>
<div id="length-width-compactness" class="section level3">
<h3>Length-Width Compactness</h3>
<p>Length-Width compactness compares the width and the length of a
district. Given a bounding box for a district (the rectangle which
surrounds a district, with top and bottom parallel to the equator and
sides orthogonal to the equator), the width (<span class="math inline">\(W\)</span>) is defined as the shorter side of that
box and the length (<span class="math inline">\(L\)</span>) as the
longer side of that box.</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Length-Width} =
\frac{Width}{Length} \]</span> Scores range from 0 to 1, where 0 is the
least compact and 1 is the most compact.</p>
<p>Length-Width compactness can be computed with:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">comp_lw</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.9161576 0.5223455</span></span></code></pre></div>
</div>
<div id="boyce-clark-compactness" class="section level3">
<h3>Boyce-Clark Compactness</h3>
<p>Boyce-Clark compactness looks at the distance from the interior
center of the shape to 16 evenly spaced radials. The interior center of
the shape is defined as the centroid if that is within the shape. If it
is not within the shape, we define it using a central point on its
surface (using <code>geos::geos_point_on_surface()</code>). With those
radials, we compute the distances <span class="math inline">\(d_{r_i}\)</span> for each of the <span class="math inline">\(i = 1:16\)</span> (for the recommended <span class="math inline">\(n = 16\)</span>) radials and look at the mean
absolute deviation.</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[\textrm{Boyce-Clark} =
\sum_{i=1}^{16}\big|\frac{r_{i}}{\sum_{i=1}^{16} r_i} * 100 -
\frac{100}{n}\big|\]</span> Scores range from 0 to <span class="math inline">\(\infty\)</span>, where 0 is the most compact and
<span class="math inline">\(\infty\)</span> is the least compact.</p>
<p>Boyce-Clark compactness can be computed with:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">comp_bc</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.7921350 0.8330235</span></span></code></pre></div>
</div>
<div id="fryer-holden-compactness" class="section level3">
<h3>Fryer Holden Compactness</h3>
<p>Fryer-Holden describes the person-distance achieved by the plan.
Individual scores do not carry much meaning and are intended to be
normalized by the minimal possible score, which can be difficult to
compute. Given the population of each redistricting unit <span class="math inline">\(P_i\)</span> and the distance between two units
<span class="math inline">\(D_{ij}\)</span>, then for any district <span class="math inline">\(k\)</span>, we compute the score as the squared
distance between the people in unit <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>.</p>
<p>Formally, the numerator can be written as:</p>
<p><span class="math display">\[\sum_{k = 1}^{n_d} = \sum_{i \in k}
\sum{j \in k} P_iP_jD_{ij}^2\]</span> Smaller scores are more compact.
When used with a denominator, a score of 1 is most compact and higher
scores are less compact.</p>
<p>Fryer-Holden compactness can be computed with:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">comp_fh</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh, <span class="at">total_pop =</span> pop)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">#&gt; [1] 5.374691e+22 5.374691e+22</span></span></code></pre></div>
</div>
</div>
<div id="adjacency-based-compactness" class="section level1">
<h1>Adjacency-Based Compactness</h1>
<div id="edges-removed-compactness" class="section level3">
<h3>Edges-Removed Compactness</h3>
<p>Edges Removed compactness describes the number of edges that have to
be removed from an adjacency graph to draw a district. Inuitively, the
edges between redistricting units which are in districts are removed.
This correlates to Polsby-Popper compactness. For a given adjacency
graph <span class="math inline">\(a\)</span>, we can write out the
number of edges as <span class="math inline">\(E(a)\)</span> and
consider the edges removed for a plan <span class="math inline">\(\pi\)</span>.</p>
<p>Formally, this is then written as:</p>
<p><span class="math display">\[ \textrm{Edges Removed} = E(a) -
E_\pi(a)\]</span> Larger scores are less compact.</p>
<p>Edges-Removed compactness can be computed with:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">comp_edges_rem</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh, <span class="at">adj =</span> nh<span class="sc">$</span>adj)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">#&gt; [1] 73 73</span></span></code></pre></div>
</div>
<div id="fraction-kept-compactness" class="section level3">
<h3>Fraction Kept Compactness</h3>
<p>Fraction Kept compactness describes the fraction of edges that have
to be kept when an adjacency graph is cut to form a district. This is
rescaling of Edges Removed Compactness for more consistent
interpretation. For a given adjacency graph <span class="math inline">\(a\)</span>, we can write out the number of edges
as <span class="math inline">\(E(a)\)</span> and consider the edges
removed for a plan <span class="math inline">\(\pi\)</span>.</p>
<p>Formally, this is then written as:</p>
<p><span class="math display">\[ \textrm{Fraction Kept} = \frac{E(a) -
E_\pi(a)}{E(a)}\]</span> Scores range from 0 to 1 where 0 is least
compact and 1 is most compact.</p>
<p>Fraction Kept compactness can be computed with:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">comp_frac_kept</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh, <span class="at">adj =</span> nh<span class="sc">$</span>adj)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.9584755 0.9584755</span></span></code></pre></div>
</div>
<div id="log-spanning-tree-compactness" class="section level3">
<h3>Log Spanning Tree Compactness</h3>
<p>For a given adjacency graph, we can consider some set of spanning
trees that can be drawn from it. The number of such spanning trees <span class="math inline">\(n_st\)</span> can be constrained more meaningfully
by first drawing spanning trees within districts, which describes the
compactness component of the Sequential Monte Carlo (McCartan and Imai
2020) algorithm.</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Log Spanning Tree} =
\textrm{log}(n_st)\]</span></p>
<p>A larger number of log spanning trees is more compact.</p>
<p>Log Spanning Tree compactness can be computed with:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">comp_log_st</span>(<span class="at">plans =</span> nh<span class="sc">$</span>r_2020, <span class="at">shp =</span> nh, <span class="at">adj =</span> nh<span class="sc">$</span>adj, <span class="at">counties =</span> county)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">#&gt; [1] -Inf -Inf</span></span></code></pre></div>
</div>
</div>
<div id="general-notes-on-speed" class="section level1">
<h1>General Notes on Speed</h1>
<p>Compactness scores can be slow to compute, especially when comparing
1000s of plans with thousands of geographic units. Some basic
recommendations:</p>
<ul>
<li>Avoid computing with block-level data where possible. Precincts or
voter tabulation districts tend to be 1/100th of the units and compute
much faster</li>
<li>Use <code>rmapshaper::ms_simplify()</code> to simplify if a small
degree of accuracy loss is acceptable</li>
<li>Pre-compute <code>prep_perims()</code> once and save the output if
relying on Polsby-Popper for more than a single plan.</li>
</ul>
<p>A rough ordering of speeds to compute:</p>
<ol style="list-style-type: decimal">
<li>Scores based on adjacency (Log Spanning Tree, Edges Removed,
Fraction Kept)</li>
<li>Scores with Rcpp implementations with <code>useRcpp = TRUE</code>
(Polsby-Popper, Schwartzberg)</li>
<li>Scores that can pre-process geographic operations (Fryer-Holden,
Length-Width)</li>
<li>Scores that can utilize pre-computed areas (Box Reock, Reock, Convex
Hull)</li>
<li>Scores that require multiple plan-level geographic computations
(Skew, X-Symmetry, Y-Symmetry)</li>
<li>Scores that that require creating many new geographic objects per
plan (Boyce-Clark)</li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
